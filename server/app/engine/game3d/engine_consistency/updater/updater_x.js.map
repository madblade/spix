{"version":3,"sources":["../../../../../../../server/app/engine/game3d/engine_consistency/updater/updater_x.js"],"names":[],"mappings":";;;;AAIA;;;;;;;;;;;;;;;;IAEM;AAEF,aAFE,QAEF,CAAY,iBAAZ,EAA+B;4CAF7B,UAE6B;;AAC3B,aAAK,WAAL,GAAmB,kBAAkB,UAAlB,CADQ;AAE3B,aAAK,OAAL,GAAe,kBAAkB,MAAlB,CAFY;AAG3B,aAAK,iBAAL,GAAyB,kBAAkB,gBAAlB,CAHE;KAA/B;;+BAFE;;+BAQK,QAAQ,MAAM;AACjB,gBAAI,aAAa,KAAK,WAAL,CADA;AAEjB,gBAAI,SAAS,KAAK,OAAL,CAFI;AAGjB,gBAAI,mBAAmB,KAAK,iBAAL;;;AAHN,gBAMb,OAAO,KAAK,IAAL,CANM;;AAQjB,gBAAI,cAAc,SAAS,OAAO,OAAP,CAAvB,CARa;AASjB,gBAAI,eAAe,KAAK,CAAL,CAAf,CATa;AAUjB,gBAAI,YAAJ,EAAkB,eAAe,SAAS,YAAT,CAAf,CAAlB;;AAEA,gBAAI,IAAI,KAAK,CAAL,CAAJ;gBAAa,IAAI,KAAK,CAAL,CAAJ;gBAAa,IAAI,KAAK,CAAL,CAAJ,CAZb;;AAcjB,gBAAI,KAAK,CAAL,MAAY,KAAZ,EAAmB;AACnB,uBAAO,SAAP,CAAiB,WAAjB,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,IAAE,CAAF,EAAK,KAAlD,EAAyD,MAAzD,EAAiE,YAAjE,EADmB;aAAvB,MAEO,IAAI,KAAK,CAAL,MAAY,KAAZ,EAAmB;AAC1B,uBAAO,wBAAP,CAAgC,WAAhC,EAA6C,CAA7C,EAAgD,CAAhD,EAAmD,CAAnD,EAD0B;aAAvB;;;WAxBT;;;kBAgCS","file":"updater_x.js","sourcesContent":["/**\n *\n */\n\n'use strict';\n\nclass XUpdater {\n\n    constructor(consistencyEngine) {\n        this._worldModel = consistencyEngine.worldModel;\n        this._xModel = consistencyEngine.xModel;\n        this._consistencyModel = consistencyEngine.consistencyModel;\n    }\n\n    update(avatar, data) {\n        let worldModel = this._worldModel;\n        let xModel = this._xModel;\n        let consistencyModel = this._consistencyModel;\n\n        // let action = data.action; // 'gate'\n        let meta = data.meta;\n\n        let originWorld = parseInt(avatar.worldId);\n        let portalToLink = meta[4];\n        if (portalToLink) portalToLink = parseInt(portalToLink);\n\n        let x = meta[1], y = meta[2], z = meta[3];\n\n        if (meta[0] === 'add') {\n            xModel.addPortal(originWorld, x, y, z, x, y, z+1, 0.999, 'both', portalToLink);\n        } else if (meta[0] === 'del') {\n            xModel.removePortalFromPosition(originWorld, x, y, z);\n        }\n\n    }\n\n}\n\nexport default XUpdater;\n"]}